---
#Apply manifiest using ansible as a controller

- name: Ensure qrgenix namespace exists
  kubernetes.core.k8s:
    api_version: v1
    kind: Namespace
    name: qrgenix
    state: present

- name: Apply + prune all qrgenix manifests
  kubernetes.core.k8s:
    state: present
    src: /workspace/k8s/staging # controller path
    delete_all: yes # prune extras
    label_selectors:
      - app.kubernetes.io/managed-by=qrgenix
